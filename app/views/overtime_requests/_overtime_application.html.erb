<div class="modal fade" id="overtimeCheckModal" tabindex="-1" role="dialog" aria-labelledby="overtimeCheckModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content"> 
      <% @overtime_requests.group_by(&:user).each do |user, requests| %>
          <h4>【<%= user.name %>からの申請】</h4>
        <div class="table-responsive"> 
          <% requests.each do |overtime_request| %>  
            <table class="table table-condensed table-hover">  
              <thead>  
                <tr>
                  <td>日付</td>
                  <td>曜日</td>
                  <td>終了予定時間</td>
                  <td>指定勤務終了時間</td>
                  <td>時間外時間</td>
                  <td>業務処理内容</td>
                  <td>指示者確認㊞</td>
                  <td>変更</td>
                  <td>勤怠を確認する</td>
                </tr>
              </thead>
              <tbody> 
                  <tr>
                    <td><%= overtime_request.worked_on.strftime("%-m/%-d") %></td>  
                    <td><%= $days_of_the_week[overtime_request.worked_on.wday] %></td>
                    <td>
                      <% if overtime_request.next_day? %>
                        翌日 <%= overtime_request.overtime_end_at.strftime("%H:%M") if overtime_request.overtime_end_at.present? %>
                      <% else %>
                        <%= overtime_request.overtime_end_at.strftime("%H:%M") if overtime_request.overtime_end_at.present? %>
                      <% end %>
                    </td>
                    <td></td>
                    <td></td>
                    <td><%= overtime_request.overtime_task %></td>
              <%= form_for overtime_request, url: approve_overtime_overtime_request_path(overtime_request), method: :patch do |f| %>
                      <td>
                        <%= f.select :overtime_status, {'なし' => 'overtime_no_request',
                                                        '申請中' => 'overtime_pending',
                                                        '承認' => 'overtime_approved',
                                                        '否認' => 'overtime_declined'
                                                        }, {}, { class: 'form-control' } %>
                      </td>
                      <td><%= f.check_box :overtime_check %></td>
                      <td><%= f.submit '確認', class: 'btn btn-primary' %></td>
                  </tr>    
                    
              </tbody>      
            </table>
              <%= f.submit '変更を送信する', class: 'btn btn-primary btn-lg' %> 
            <% end %>
          <% end %> 
        <% end %>       
      </div>     
    </div>
  </div>
</div>


